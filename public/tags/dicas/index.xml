<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dicas on Henrique Dias</title>
    <link>https://henriquedias.com/tags/dicas/</link>
    <description>Recent content in Dicas on Henrique Dias</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 29 Aug 2014 16:47:20 +0000</lastBuildDate>
    <atom:link href="https://henriquedias.com/tags/dicas/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>5 truques e dicas em PHP</title>
      <link>https://henriquedias.com/explanations/truques-dicas-em-php</link>
      <pubDate>Fri, 29 Aug 2014 16:47:20 +0000</pubDate>
      
      <guid>https://henriquedias.com/explanations/truques-dicas-em-php</guid>
      <description>

&lt;p&gt;A linguagem de programação PHP é das mais utilizadas atualmente do lado do servidor quando o assunto são páginas web.&lt;/p&gt;

&lt;p&gt;Para os iniciantes ou mesmo profissionais, aqui estão 5 simples e úteis truques e dicas para aplicarem quando estão a escrever em PHP.&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://henriquedias.com/images/php5dicas.jpg&#34; alt=&#34;5 truques e dicas em PHP&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;h2 id=&#34;1-utilizar-o-operador-ternário:142d40d378f82790ef24274f222d6b1c&#34;&gt;1. Utilizar o operador ternário&lt;/h2&gt;

&lt;p&gt;Nós já escrevemos um artigo sobre este operador que podem ver &lt;a href=&#34;https://henriquedias.com/explanations/operador-ternario/&#34;&gt;aqui&lt;/a&gt;. Para laços (&lt;em&gt;loops&lt;/em&gt;) simples, podemos utilizar o operador ternário de forma a poupar espaço como podem ver no exemplo seguinte:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;$n = rand(0,100);&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;if ($n &amp;gt; 50) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    echo &amp;#39;O número é maior que 50!&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;} else {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    echo &amp;#39;O número é menor que 50!&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;//Utilizando o operador ternário ficaria:&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;echo ($n &amp;gt; 50) ? &amp;#39;O número é maior que 50!&amp;#39; : &amp;#39;O número é menor que 50!&amp;#39;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;//O leitor Gustavo Rafael sugeriu uma forma mais simplificada:&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;echo &amp;#39;O número é &amp;#39; . (($n &amp;gt; 50) ? &amp;#39;maior&amp;#39; : &amp;#39;menor&amp;#39;) . &amp;#39; que 50!&amp;#39;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;2-nunca-mais-te-voltas-a-enganar-nos-ifs:142d40d378f82790ef24274f222d6b1c&#34;&gt;2. Nunca mais te voltas a enganar nos &lt;code&gt;ifs&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Um erro muito cometido é atribuir um valor a uma variável dentro de uma condição ou seja, colocamos &lt;code&gt;$x = 1&lt;/code&gt; ao invés de &lt;code&gt;$x == 1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;O mais &amp;ldquo;engraçado&amp;rdquo; é que o PHP não dá erro e, por vezes, gastamos muito tempo à procura da fonte do problema.&lt;/p&gt;

&lt;p&gt;Esta situação pode ser invertida colocando a variável na segunda posição. Assim, o PHP irá gerar um erro quando nos enganamos:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;//Não produz erro&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;if ( $userRole = 0 ) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;   echo &amp;#39;Você é Administrador.&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;//Produz erro&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;if ( 0 = $userRole ) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;   echo &amp;#39;Você é Administrador.&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;O que acontece aqui, é que o PHP não nos vai deixar atribuir um valor a um valor (um pouco redundante), gerando erro.&lt;/p&gt;

&lt;h2 id=&#34;3-saber-se-o-número-é-par-ou-ímpar:142d40d378f82790ef24274f222d6b1c&#34;&gt;3. Saber se o número é par ou ímpar&lt;/h2&gt;

&lt;p&gt;À primeira vista pode parecer algo muito pouco importante porém pode ser muito útil nas mais diversas situações.&lt;/p&gt;

&lt;p&gt;Existe uma forma extremamente simples de saber se um número é par ou ímpar. Veja:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;$n = 1250;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;// ex1&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;echo ($n &amp;amp; 1) ? &amp;quot;Ímpar&amp;quot; : &amp;quot;Par&amp;quot;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;// ex2&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;if ($n &amp;amp; 1) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  // o que fazer se o número for ímpar&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;} else {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  // o que fazer se o número for par&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;4-não-deve-utilizar-funções-dentro-de-laços:142d40d378f82790ef24274f222d6b1c&#34;&gt;4. Não deve utilizar funções dentro de laços&lt;/h2&gt;

&lt;p&gt;Quando utilizamos funções dentro de um laço, esta função é chamada sempre que o laço é executado tornando o tempo de execução mais lento. Exemplo:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;for ($i = 0; $i &amp;lt; count($array); $i) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  //Sempre que este laço é executado, a função count() será chamada.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;5-comparar-2-conjuntos-de-caracteres-strings:142d40d378f82790ef24274f222d6b1c&#34;&gt;5. Comparar 2 conjuntos de caracteres (&lt;code&gt;strings&lt;/code&gt;)&lt;/h2&gt;

&lt;p&gt;Última mas não menos importante. Mais uma que pode parecer desnecessária, mas pode ser muito útil. Exemplo:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;$frase1 = &amp;#39;Não se esqueçam de gostar a nossa página do Facebook&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;$frase2 = &amp;#39;Não se esqueçam de seguir a nossa página do Google+&amp;#39;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;// criação da comparação&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;similar_text($frase1, $frase2, $howMuchEqual);&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;// a variável $hoeMuchEqual vai conter a percentagem de igualdade entre as duas frases.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;// neste caso, $howMuchEqual será igual a 82.56880733945&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;

&lt;p&gt;Como podem ver, as dicas mais simples podem vir a ser muito úteis.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Como utilizar a API de Passwords do PHP 5.5&#43;</title>
      <link>https://henriquedias.com/tutorials/como-utilizar-api-passwords-php-55</link>
      <pubDate>Wed, 20 Aug 2014 22:16:15 +0000</pubDate>
      
      <guid>https://henriquedias.com/tutorials/como-utilizar-api-passwords-php-55</guid>
      <description>

&lt;p&gt;Como muitas das novidades introduzidas na &lt;a href=&#34;http://php.net/manual/en/migration55.changes.php&#34;&gt;versão 5.5&lt;/a&gt; do PHP, a API de passwords não passou despercebida aos desenvolvedores. Hoje vamos falar da criação de hash de passwords utilizando esta API.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://henriquedias.com/images/api_passwords.jpg&#34; alt=&#34;Como utilizar a API de Passwords do PHP 5.5+&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Antes de começarmos a analisar como se criam as passwords, vamos ver que novas funções trouxe &lt;a href=&#34;http://php.net/manual/en/book.password.php&#34;&gt;esta API&lt;/a&gt; para o PHP:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;password_get_info&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password_hash&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password_needs_rehash&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password_verify&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Cada uma tem uma função diferente porém estão todas relacionadas. Assim, vamos falar de cada uma destas funções. Vamos começar!&lt;/p&gt;

&lt;h2 id=&#34;password-hash:f2cd69faba962abe878d8e6257d3bccb&#34;&gt;password_hash&lt;/h2&gt;

&lt;p&gt;Esta função pode ser considerada a principal do conjunto pois é com ela que criamos as &lt;em&gt;hash&lt;/em&gt; e deve ser utilizada da seguinte forma:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;$password = &amp;#39;a_minha_password&amp;#39;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Da seguinte forma podemos gerar a hash de uma password&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * utilizando o algoritmo que está definido em DEFAULT.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Na versão 5.5.0 do PHP este algoritmo correponde ao BCRYPT&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * A hash vai ter o comprimento de, no mínimo, 60 caracteres.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Este comprimento pode alterar em novas versões do PHP.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;password_hash($password, PASSWORD_DEFAULT);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Podemos ainda definir alguns parâmetros opcionais nomeadamente o &lt;code&gt;cost&lt;/code&gt; (&amp;ldquo;custo&amp;rdquo;) e o &lt;code&gt;salt&lt;/code&gt; (&amp;ldquo;sal&amp;rdquo;) da seguinte forma:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;$password = &amp;#39;a_minha_password&amp;#39;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Da seguinte forma podemos gerar a hash de uma password&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * utilizando o algoritmo BCRYPT.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Podemos definir duas opções no terceiro parâmetro:&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *  COST  =&amp;gt;  Por padrão, será criado um novo por cada nova&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * hash criada porém pode ser definido.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *  SALT  =&amp;gt;  Por padrão, o valor 10 irá ser utilizado porém&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * pode ser alterado à semelhança do anterior.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$options = array(&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;cost&amp;#39;  =&amp;gt; 13,&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;salt&amp;#39;  =&amp;gt; mcrypt_create_iv(25, MCRYPT_DEV_URANDOM)&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  );&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;password_hash($password, PASSWORD_BCRYPT, $options);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Acrescento ainda que a função retornará &lt;code&gt;false&lt;/code&gt; em caso de erro.&lt;/p&gt;

&lt;h2 id=&#34;password-verify:f2cd69faba962abe878d8e6257d3bccb&#34;&gt;password_verify&lt;/h2&gt;

&lt;p&gt;Depois de criarmos a &lt;em&gt;hash&lt;/em&gt; vamos precisar de, evidentemente, confirmá-la. Para confirmar se uma password corresponde a uma hash basta utilizarmos esta função da seguinte forma:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Para utilizar esta função basta colocar a password&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * a verificar no primeiro parâmetro e a hash no segundo.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Não precisa de se preocupar se colocou algum &amp;quot;salt&amp;quot; ou&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * &amp;quot;cost&amp;quot; personalizados pois esta informação está embutida&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * na hash.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * A função irá returnar os valores &amp;quot;true&amp;quot; ou &amp;quot;false&amp;quot;.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$password = &amp;#39;teste&amp;#39;;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;$hash = &amp;#39;$2y$10$M.3t0/gmB12IrSETmINf7uy9XhruDrmB8vjaktfd5vC8AfVPH695.&amp;#39;;&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;password_verify($password, $hash);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;password-get-info:f2cd69faba962abe878d8e6257d3bccb&#34;&gt;password_get_info&lt;/h2&gt;

&lt;p&gt;Esta informação permite-nos obter a informação acerca de uma hash. A informação obtida corresponde ao algoritmo, o seu nome e as opções dadas quando criámos a hash. Exemplo:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;//Criação de uma hash de exemplo&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$options = array(&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;cost&amp;#39;  =&amp;gt; 13,&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;salt&amp;#39;  =&amp;gt; mcrypt_create_iv(25, MCRYPT_DEV_URANDOM)&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  );&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$hash = password_hash(&amp;#39;a_minha_password&amp;#39;, PASSWORD_BCRYPT, $options);&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Utilizando a função password_get_info, vamos obter as diversas opções&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * enviadas quando criámos a hash.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$info = password_get_info($hash);&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * Assim, var_dump($info) irá retornar o seguinte:&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * array(3) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * 	[&amp;quot;algo&amp;quot;]=&amp;gt; int(1)&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *	[&amp;quot;algoName&amp;quot;]=&amp;gt; string(6) &amp;quot;bcrypt&amp;quot;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *	[&amp;quot;options&amp;quot;]=&amp;gt; array(1)&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *		{ [&amp;quot;cost&amp;quot;]=&amp;gt; int(13) }&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; *	}&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;password-needs-rehash:f2cd69faba962abe878d8e6257d3bccb&#34;&gt;password_needs_rehash&lt;/h2&gt;

&lt;p&gt;Esta função permite-nos confirmar se uma hash já criada corresponde a uma array de opções e a um algoritmos. Podem observar mais no seguinte exemplo:&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;x&#34;&gt;//Criação de uma hash de exemplo&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$options = array(&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;cost&amp;#39;  =&amp;gt; 13,&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    &amp;#39;salt&amp;#39;  =&amp;gt; mcrypt_create_iv(25, MCRYPT_DEV_URANDOM)&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;  );&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;$hash = password_hash(&amp;#39;a_minha_password&amp;#39;, PASSWORD_BCRYPT, $options);&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;/*&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * A função seguinte irá retornar true porque todas as opções corresponde&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; * às que foram dadas anteriormente.&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt; */&lt;/span&gt;

&lt;span class=&#34;x&#34;&gt;password_needs_rehash($hash, 0, $options);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Se tiver qualquer dúvida relacionada ao segundo parâmetro da função, sugiro-lhe a leitura &lt;a href=&#34;http://php.net/manual/pt_BR/password.constants.php&#34;&gt;desta página&lt;/a&gt; e também que verifique os valores obtidos com &lt;code&gt;password_get_info&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Espero que dê bom uso a esta função :)&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>