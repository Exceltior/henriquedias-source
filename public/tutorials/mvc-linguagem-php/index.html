<!DOCTYPE html>
<html class="no-js" lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MVC na linguagem PHP | Henrique Dias</title>
<meta name="description" content="O modelo MVC é algo muito utilizado atualmente. Nesta primeira parte iremos explicar a estrutura base de uma aplicação MVC e criar o ficheiro principal">
<link rel="canonical" href="http://localhost:1313/tutorials/mvc-linguagem-php">
<link rel="publisher" href="https://plus.google.com/+HenriqueDias"/>
<meta property="og:locale" content="en-us" />
<meta property="og:type" content="article" />
<meta property="og:title" content="MVC na linguagem PHP | Henrique Dias" />
<meta property="og:description" content="O modelo MVC é algo muito utilizado atualmente. Nesta primeira parte iremos explicar a estrutura base de uma aplicação MVC e criar o ficheiro principal" />
<meta property="og:url" content="http://localhost:1313/tutorials/mvc-linguagem-php" />
<meta property="og:site_name" content="Henrique Dias | A CompSci Enthusiast" />
<meta property="article:publisher" content="https://www.facebook.com/hacdias" />
<meta property="article:author" content="https://www.facebook.com/hacdias" />
<meta property="article:tag" content="MVC, PHP" />
<meta property="article:section" content="Tutorials" />
<meta property="article:published_time" content="2014-12-18T22:55:34Z" />
<meta property="article:modified_time" content="2014-12-18T22:55:34Z" />
<meta property="og:updated_time" content="2014-12-18T22:55:34Z" />
<meta property="og:image" content="http://localhost:1313/images/home.jpg" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:description" content="O modelo MVC é algo muito utilizado atualmente. Nesta primeira parte iremos explicar a estrutura base de uma aplicação MVC e criar o ficheiro principal"/>
<meta name="twitter:title" content="MVC na linguagem PHP | Henrique Dias"/>
<meta name="twitter:site" content="@hacdias"/>
<meta name="twitter:domain" content="Henrique Dias"/>
<meta name="twitter:image:src" content="http://localhost:1313/images/home.jpg"/>
<meta name="twitter:creator" content="@hacdias"/>

<meta name="msvalidate.01" content="B471CBBC9EF6900039C6BBF251EF277C" />
<meta name="google-site-verification" content="nVQ4_x6m6ZTRAzclMPNxpB0iMgK-xoIj_d-l85u32nY" />


<link rel="shortcut icon" href="http://localhost:1313/favicon.ico" type="image/x-icon">
<link rel="icon" href="http://localhost:1313/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="http://localhost:1313/css/normalize.css">
<link rel="stylesheet" href="http://localhost:1313/css/main.css">
<link rel="stylesheet" href="http://localhost:1313/css/syntax.css">
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Person",
  "email": "mailto:hacdias@gmail.com",
  "image": "http:\/\/localhost:1313\/henrique.png",
  "jobTitle": "Author",
  "name": "Henrique Dias",
  "telephone": "351 965 856 140",
  "url": "http:\/\/localhost:1313\/",
  "sameAs" : [ "http://www.facebook.com/hacdias",
      "http://twitter.com/hacdias",
      "http://instagram.com/hacdias",
      "http://www.linkedin.com/in/hacdias",
      "http://plus.google.com/+HenriqueDias"]
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": "Henrique Dias",
  "name": "MVC na linguagem PHP"
}
</script>

</head>

<body lang="en">


<section id="main">
  <h1 id="title">MVC na linguagem PHP</h1>
  <div>
        <article id="content">
           

<p>No último artigo publicado, foi falado acerca do <a href="/explanations/mvc-uma-breve-explicacao/"><strong>Modelo MVC</strong></a> e sobre aquilo em que este consiste. O Modelo <em>Model-View-Controller</em> é amplamente utilizado nos dias de hoje.</p>

<p>A pedido de um leitor, decidimos escrever um artigo em que exemplificamos este maravilhoso (ou não) modelo MVC utilizando a linguagem de programação PHP.</p>

<p><img src="/images/mvcuecphppI.jpg" alt="Modelo MVC - Uma exemplificação com PHP #1" /></p>

<p>Gostaria de dizer que esta exemplificação terá como base uma &ldquo;framework base&rdquo; MVC construída por mim através de vários tutoriais e ideias que encontrei <em>online</em>.</p>

<p>Para a aplicação começar a ser construída, é necessário efetuar a estruturação da mesma. Esta estruturação passa pela disposição dos ficheiros pelas pastas. Irá ser utilizada a seguinte estrutura:</p>

<div class="highlight"><pre><span class="p">|</span> app_core <span class="o">(</span>Application Core<span class="o">)</span>
     <span class="p">|</span> controllers
     <span class="p">|</span> libs
     <span class="p">|</span> models
     <span class="p">|</span> views
     <span class="p">|</span> config.php

<span class="p">|</span> public_html <span class="o">(</span>Public HTML<span class="o">)</span>
     <span class="p">|</span> css
     <span class="p">|</span> imgs
     <span class="p">|</span> js
     <span class="p">|</span> .htaccess
     <span class="p">|</span> index.php
</pre></div>


<p>Visualizando a estruturação anterior, é possível verificar que existem duas pastas principais: a pasta <code>app_core</code> e a pasta <code>public_html</code>. Cada uma das duas pastas tem a sua função específica. Vejamos então qual a finalidade de cada uma das pastas.</p>

<h2 id="application-core:2145cfb95ae0f5633dadec63c3e54ade"><em>Application Core</em></h2>

<p>O núcleo (ou motor) da aplicação está contido na pasta <code>app_core</code> estando no mesmo nível que a pasta que irá estar pública através do <em>browser</em>, logo os visitantes não terão acesso a nenhum conteúdo desta pasta. Dentro desta pasta podemos verificar a existência de quatro outras e também de um ficheiro.</p>

<ul>
<li><p><code>controllers</code> → pasta para colocar os controladores da aplicação que são, de forma generalizada, aqueles ficheiros que comandam a aplicação: o seu cérebro;</p></li>

<li><p><code>libs</code> → nesta pasta estão contidas as classes base para todos os outros ficheiros da aplicação como os modelos, controladores, vistas, base de dados, etc.</p></li>

<li><p><code>models</code> → aqui são colocados os modelos da aplicação, ou seja, aqueles ficheiros que estão encarregados da manipulação de dados;</p></li>

<li><p><code>views</code> → esta pasta irá conter todos os ficheiros que têm como base HTML. Mais nenhuma pasta da aplicação deverá conter ficheiros com HTML;</p></li>

<li><p><code>config.php</code> → o ficheiro de configuração principal. Aqui são definidas as diversas constantes que irão ser necessárias na execução da aplicação.</p></li>
</ul>

<h2 id="public-html:2145cfb95ae0f5633dadec63c3e54ade"><em>Public HTML</em></h2>

<p>A pasta <code>public_html</code> será aquela que para a qual o servidor web, como por exemplo o apache, estará a apontar. Esta irá conter todos os ficheiros que estarão disponíveis ao utilizador.</p>

<ul>
<li><code>css</code> → todos os ficheiros de estilo serão incluídos nesta pasta;</li>
<li><code>imgs</code> → qualquer imagem que seja utilizada na aplicação poderá ser colocada aqui;</li>
<li><code>js</code> → todos os scripts escritos na linguagem <em>javascript</em> deverão aqui ser colocados;</li>
<li><code>.htacces</code>s → o ficheiro que dispensa apresentações;</li>
<li><code>index.php</code> → o ficheiro onde tudo começa.</li>
</ul>

<h2 id="config-php:2145cfb95ae0f5633dadec63c3e54ade">config.php</h2>

<p>Iremos começar pelo ficheiro mais simples: o ficheiro <code>config.php</code> que está contido base do núcleo da aplicação (<code>app_core/config.php</code>). Este ficheiro, como já referido, irá conter as constantes principais. Ora veja:</p>

<div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="cm">/*</span>
<span class="cm">* Ficheiro de Configuração</span>
<span class="cm">*</span>
<span class="cm">* Este ficheiro contém a configuração base deste website/aplicação:</span>
<span class="cm">*  1. Constantes Base</span>
<span class="cm">*  2. Constantes de Diretórios</span>
<span class="cm">*  3. Configuração da Base de Dados</span>
<span class="cm">*  4. Definições de erros</span>
<span class="cm">*</span>
<span class="cm">* Coloque sempre uma barra (/) depois de todos os caminhos.</span>
<span class="cm">*/</span>

<span class="c1">//1. Constantes Base</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;ROOT&#39;</span><span class="p">,</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;URL&#39;</span><span class="p">,</span> <span class="s1">&#39;http://localhost/mvc/&#39;</span><span class="p">);</span>

<span class="c1">//2. Constantes de Diretórios</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DIR_LIBS&#39;</span><span class="p">,</span> <span class="nx">ROOT</span>  <span class="o">.</span> <span class="s1">&#39;libs/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DIR_MODELS&#39;</span><span class="p">,</span> <span class="nx">ROOT</span>  <span class="o">.</span> <span class="s1">&#39;models/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DIR_VIEWS&#39;</span><span class="p">,</span> <span class="nx">ROOT</span>  <span class="o">.</span> <span class="s1">&#39;views/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DIR_CONTROLLERS&#39;</span><span class="p">,</span> <span class="nx">ROOT</span> <span class="o">.</span> <span class="s1">&#39;controllers/&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DIR_PUBLIC&#39;</span><span class="p">,</span> <span class="s1">&#39;../public_html/&#39;</span><span class="p">);</span>

<span class="c1">//3. Configuração da Base de Dados</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DB_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;mysql&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DB_HOST&#39;</span><span class="p">,</span> <span class="s1">&#39;localhost&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DB_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;dbname&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DB_USER&#39;</span><span class="p">,</span> <span class="s1">&#39;dbuser&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DB_PASS&#39;</span><span class="p">,</span> <span class="s1">&#39;dbpass&#39;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">* 4. Definições de Erros</span>
<span class="cm">*</span>
<span class="cm">* Defina error_reporting:</span>
<span class="cm">*  para -1 de forma a mostrar todos os erros que ocorrem;</span>
<span class="cm">*  para  0 de forma a ocultar todos os erros gerados.</span>
<span class="cm">*/</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">ini_set</span><span class="p">(</span> <span class="s1">&#39;display_errors&#39;</span><span class="p">,</span><span class="s1">&#39;-1&#39;</span><span class="p">);</span>
</pre></div>


<p>Crie um ficheiro com o código acima e guarde-o na pasta mencionada. Não se esqueça de alterar a constante URL, de forma a corresponder com o URL que vai utilizar para criar esta pequena aplicação. Altere também os dados da Configuração da Base de Dados.</p>

<h3 id="dica:2145cfb95ae0f5633dadec63c3e54ade">Dica:</h3>

<p>Como pode ter reparado acima, eu estou a utilizar o link <code>localhost/mvc</code>  que redirecionará para a pasta pública da aplicação, sendo que a base dos documentos do meu servidor é <code>C:\Web\Server\Apache24\htdocs</code>  e a aplicação está localizada em <code>D:\Development\mvc</code>.</p>

<p>Como fiz isto? Criei um <a href="http://en.wikipedia.org/wiki/Symbolic_link"><em>link simbólico</em></a> de forma a que C:WebServerApache24htdocsmvc  corresponda a D:Developmentmvcpublic_html . Para criar um link simbólico no Windows basta correr o seguinte comando na linha de comandos em modo de administrador:</p>

<div class="highlight"><pre>MKLINK /D &lt;novo-link&gt; &lt;<span class="nb">local</span>-dos-ficheiros&gt;
</pre></div>


<p>Onde <code>&lt;novo-link</code>&gt; corresponde ao local a que irá corresponder o <code>&lt;local-dos-ficheiros&gt;</code>. No meu caso, tive que executar o seguinte comando:</p>

<div class="highlight"><pre>MKLINK /D C:<span class="se">\W</span>ebServer<span class="se">\A</span>pache24<span class="se">\h</span>tdocs<span class="se">\m</span>vc D:<span class="se">\D</span>evelopment<span class="se">\m</span>vc<span class="se">\p</span>ublic_html
</pre></div>


<p>Isto pode ser, obviamente, feito também em <em>linux</em> e <em>OS X</em> porém não sei como, mas caso tenha uma distribuição Linux ou OS X, recomendo a leitura desta <a href="http://apple.stackexchange.com/questions/115646/how-can-i-create-a-symbolic-link-in-terminal">página</a>.</p>

<h2 id="saindo-da-dica:2145cfb95ae0f5633dadec63c3e54ade">Saindo da dica&hellip;</h2>

<p>Como pode ver pela estrutura da aplicação, ainda há muito a fazer. Em breve lançarei a segunda parte desta mini-série de artigos. Esperemos que tenham gostado deste e que gostem dos próximos artigos.</p>

        </article>
  </div>
</section>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'hacdias';
    var disqus_identifier = 'http:\/\/localhost:1313\/tutorials\/mvc-linguagem-php';
    var disqus_title = 'MVC na linguagem PHP';
    var disqus_url = 'http:\/\/localhost:1313\/tutorials\/mvc-linguagem-php';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<footer>

</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59697241-1', 'auto');
  ga('send', 'pageview');
</script>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

